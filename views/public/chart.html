<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>TrunKey Chart</title>
    <link rel="stylesheet" href="/css/chart.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
  </head>
  <body>
    <header class="navbar">
      <div class="navbar-group">
        <button class="nav-btn" onclick="openChangePasswordModal();" disabled>
          Settings
        </button>
        <button class="nav-btn" onclick="Realtime()">Realtime</button>
        <button
          class="nav-btn"
          id="renkoSettingBtn"
          onclick="openRenkoSettingsModal()"
        >
          Renko settings
        </button>
        <button
          class="nav-btn"
          id="generateChartBtn"
          onclick="validateChartForm();"
        >
          Generate chart
        </button>
        <button
          id="deleteHistoryBtn"
          onclick="deleteCacheHistory();"
          class="nav-btn"
        >
          Delete history
        </button>
        <button onclick="Logout()" class="nav-btn nav-btn-logout">
          Exit & Delete history
        </button>
      </div>
    </header>

    <div class="dashboard-main">
      <div class="chart-controls-bar">
        <div class="chart-controls">
          <label>
            Ticker:
            <div class="ticker-autocomplete">
              <input
                type="text"
                id="ticker"
                placeholder="Enter Ticker(s)"
                autocomplete="off"
              />
              <input type="hidden" id="ticker-code" />
              <ul id="ticker-list" class="ticker-list"></ul>
              <span class="input-error" id="error-ticker"></span>
            </div>
          </label>
          <label>
            Date & Time From:
            <input
              type="datetime-local"
              id="dateFrom"
              oninput="updateInterval();"
            />
            <span class="input-error" id="error-dateFrom"></span>
          </label>
          <label>
            Date & Time To:
            <input
              type="datetime-local"
              id="dateTo"
              oninput="updateInterval();"
            />
            <span class="input-error" id="error-dateTo"></span>
          </label>
          <label>
            Interval:
            <select id="interval">
              <option value="1m">1min</option>
              <option value="15m">15min</option>
              <option value="30m">30min</option>
              <option value="1h">60min</option>
              <option value="static">Static</option>
            </select>
            <span class="input-error" id="error-interval"></span>
          </label>
          <label>
            Chart type:
            <select id="chartType">
              <option value="area">Area Chart</option>
              <option value="line">Line Chart</option>
              <option value="candlestick">Candlestick</option>
              <option value="baseline">Baseline</option>
              <option value="heikin">Heikin Ashi</option>
              <option value="renko">Renko</option>
            </select>
            <span class="input-error" id="error-chartType"></span>
          </label>
        </div>
      </div>

      <div class="dashboard-top">
        <div class="chart-area card">
          <div class="chart-toolbar">
            <div class="toolbar-left" id="toolbarLeft">
              <div class="comparison-tickers-container">
                <div class="form-group">
                  <label>
                    Ticker 1:
                    <div class="ticker-autocomplete">
                      <input
                        type="text"
                        id="compare-ticker-1"
                        placeholder="Enter Ticker(s)"
                        autocomplete="off"
                      />
                      <input type="hidden" id="compare-ticker-code-1" />
                      <ul id="compare-ticker-list-1" class="ticker-list"></ul>
                    </div>
                  </label>
                </div>

                <div class="form-group">
                  <label>
                    Ticker 2:
                    <div class="ticker-autocomplete">
                      <input
                        type="text"
                        id="compare-ticker-2"
                        placeholder="Enter Ticker(s)"
                        autocomplete="off"
                      />
                      <input type="hidden" id="compare-ticker-code-2" />
                      <ul id="compare-ticker-list-2" class="ticker-list"></ul>
                    </div>
                  </label>
                </div>
              </div>
            </div>
<div
            id="chartInfoBox"
            class="chart-info-box"            
          >
            <div id="infoTime"></div>
            <div id="infoPrice"></div>
            <div id="infoVolume"></div>
            <div id="infoVWAP"></div>
            <div id="infoRTAT"></div>
          </div>
            <button
              id="expandChartBtn"
              class="expand-btn"
              title="Expand/Shrink"
            >
              <span id="expandIcon" class="material-icons">fullscreen</span>
            </button>
          </div>
          
          <div id="chartDiv"></div>
        </div>
        <aside class="side-panel card">
          <div class="side-custom-grid">
            <div class="grid-row row1">
              <div class="grid-cell" id="mainBox-core"></div>
            </div>
            <div class="grid-row row2">
              <div class="grid-cell" id="compareBox1-core"></div>
            </div>
            <div class="grid-row row3">
              <div class="grid-cell" id="compareBox2-core"></div>
            </div>
            <div class="grid-row row4">
              <div class="grid-cell" id="mainBox-4w52w"></div>
              <div class="grid-cell" id="compareBox1-4w52w"></div>
              <div class="grid-cell" id="compareBox2-4w52w"></div>
            </div>
            <div class="grid-row row5">
              <div class="grid-cell" id="mainBox-rtat"></div>
              <div class="grid-cell" id="compareBox1-rtat"></div>
              <div class="grid-cell" id="compareBox2-rtat"></div>
            </div>
            <div class="grid-row row6">
              <div class="grid-cell" id="mainBox-bias"></div>
              <div class="grid-cell" id="compareBox1-bias"></div>
              <div class="grid-cell" id="compareBox2-bias"></div>
            </div>
          </div>
        </aside>
      </div>

      <div class="news-controls-bar">
        <form class="news-controls-form">
          <div class="control-group">
            <label for="newsStartDate"><strong>Start Date:</strong></label>
            <input type="date" id="newsStartDate" />
          </div>
          <div class="control-group">
            <label for="newsEndDate"><strong>End Date:</strong></label>
            <input type="date" id="newsEndDate" />
          </div>
          <div class="control-group" style="align-self: flex-end">
            <button
              type="button"
              id="generateNewsBtn"
              class="news-generate-btn"
              onclick="generateNews();"
            >
              Generate
            </button>
          </div>
        </form>
      </div>

      <div class="news-table card" id="newsCard">
        <table>
          <colgroup>
            <col style="width: 20%" />
            <col style="width: 20%" />
            <col style="width: 60%" />
          </colgroup>
          <thead>
            <tr>
              <th>Date - (Symbol)</th>
              <th>Publication</th>
              <th class="headlines-header">
                Headlines
                <button
                  id="expandNewsBtn"
                  class="expand-btn news-expand-btn"
                  title="Expand/Shrink News"
                >
                  <span id="newsExpandIcon" class="material-icons"
                    >fullscreen</span
                  >
                </button>
              </th>
            </tr>
          </thead>
          <tbody id="newsHeadlines"></tbody>
        </table>
      </div>
    </div>

    <div id="changePasswordModal" class="modal-overlay" style="display: none">
      <div class="modal-dialog">
        <form
          id="changePasswordForm"
          class="modal-form"
          autocomplete="off"
          onsubmit="return submitChangePassword();"
        >
          <h2>Change Password</h2>
          <label>
            Old Password:
            <input type="password" id="oldPassword" />
            <span class="input-error" id="error-oldPassword"></span>
          </label>
          <label>
            New Password:
            <input type="password" id="newPassword" />
            <span class="input-error" id="error-newPassword"></span>
          </label>
          <label>
            Confirm Password:
            <input type="password" id="confirmPassword" />
            <span class="input-error" id="error-confirmPassword"></span>
          </label>
          <div class="modal-actions">
            <button
              type="button"
              class="modal-btn cancel-btn"
              onclick="closeChangePasswordModal()"
            >
              Cancel
            </button>
            <button type="submit" class="modal-btn submit-btn">Change</button>
          </div>
        </form>
      </div>
    </div>
    <div id="renkoSettingsModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close" onclick="closeRenkoSettingsModal()">&times;</span>
        <h2>Renko Settings</h2>
        <form id="renkoSettingsForm">
          <label>
            <input type="radio" name="renkoType" value="fixed" checked /> Fixed
            (Traditional)
          </label>
          <div id="fixedSettings" style="display: block">
            <label
              >Brick Size:
              <input
                type="number"
                id="fixedBrickSize"
                value="1.0"
                step="0.1"
                min="0.1"
            /></label>
          </div>

          <label>
            <input type="radio" name="renkoType" value="atr" /> ATR Based
          </label>
          <div id="atrSettings" style="display: none">
            <label
              >ATR Period:
              <input type="number" id="atrPeriod" value="14" min="1"
            /></label>
          </div>

          <label>
            <input type="radio" name="renkoType" value="percentage" />
            Percentage
          </label>
          <div id="percentageSettings" style="display: none">
            <label
              >Percentage:
              <input
                type="number"
                id="percentageValue"
                value="1"
                step="0.1"
                min="0.1"
            /></label>
          </div>

          <button type="button" onclick="saveRenkoSettings()">Save</button>
        </form>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
    <script src="/js/chart.js"></script>
  </body>
</html>
